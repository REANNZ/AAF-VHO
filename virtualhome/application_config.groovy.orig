import org.apache.log4j.DailyRollingFileAppender

// DEVELOPMENT CONFIGURATION - DELETE BELOW BLOCK IF PRODUCTION
greenmail.disabled = false
grails {
  resources.debug = true
  gsp.enable.reload = true
  logging.jul.usebridge = true
  mail {
    port = com.icegreen.greenmail.util.ServerSetupTest.SMTP.port
  }
}
dataSource {
  pooled = true
  driverClassName = "org.h2.Driver"
  username = "sa"
  password = ""
  dbCreate = "create-drop"
  url = "jdbc:h2:mem:devDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
}
// END DEVELOPMENT CONFIGURATION - DELETE ABOVE BLOCK IF PRODUCTION

// PRODUCTION CONFIGURATION - DELETE BELOW BLOCK IF DEVELOPMENT
greenmail.disabled = true
testDataConfig.enabled = false
grails {
  resources.debug = false  
  gsp.enable.reload = false
  logging.jul.usebridge = false
  mail {
    host = 'localhost' // More advanced mail config available per: http://grails.org/plugin/mail
  }
}
dataSource {
  dbCreate = "update"
  dialect= org.hibernate.dialect.MySQL5InnoDBDialect
  jndiName= "java:comp/env/jdbc/APPNAME" 
}
// END PRODUCTION CONFIGURATION - DELETE ABOVE BLOCK IF DEVELOPMENT

// COMMON CONFIGURATION
recaptcha {
  publicKey = ""
  privateKey = ""

  includeNoScript = true
  forceLanguageInURL = false

  enabled = true
  useSecureAPI = true
}

grails.app.context='/'
grails.serverURL = "https://vh.example.edu.au"
grails.mail.default.from="noreply@example.edu.au"


// Logging

log4j = {
  appenders {
    appender new DailyRollingFileAppender(name:"app-security", layout:pattern(conversionPattern: "%d{[ dd.MM.yy HH:mm:ss.SSS]} %-5p %c %x - %m%n"), file:"/tmp/app-security.log", datePattern:"'.'yyyy-MM-dd")
    appender new DailyRollingFileAppender(name:"app", layout:pattern(conversionPattern: "%d{[ dd.MM.yy HH:mm:ss.SSS]} %-5p %c %x - %m%n"), file:"/tmp/app.log", datePattern:"'.'yyyy-MM-dd")
    appender new DailyRollingFileAppender(name:"app-grails", layout:pattern(conversionPattern: "%d{[ dd.MM.yy HH:mm:ss.SSS]} %-5p %c %x - %m%n"), file:"/tmp/app-grails.log", datePattern:"'.'yyyy-MM-dd")
    appender new DailyRollingFileAppender(name:"stacktrace", layout:pattern(conversionPattern: "%d{[ dd.MM.yy HH:mm:ss.SSS]} %-5p %c %x - %m%n"), file:"/tmp/app-stacktrace.log", datePattern:"'.'yyyy-MM-dd")
  }

  info  'app-security'  :['grails.app.filters'], additivity: false

  info  'app'           :['grails.app.controllers',
                          'grails.app.domains',
                          'grails.app.services',
                          'grails.app.realms',
                          'aaf.vhr',                       
                          'org.apache.shiro'], additivity: false
          
  warn  'app-grails'    :['org.codehaus.groovy.grails.web.servlet',
                          'org.codehaus.groovy.grails.web.pages',
                          'org.codehaus.groovy.grails.web.sitemesh',
                          'org.codehaus.groovy.grails.web.mapping.filter',
                          'org.codehaus.groovy.grails.web.mapping',
                          'org.codehaus.groovy.grails.commons',
                          'org.codehaus.groovy.grails.plugins'], additivity: false
}
